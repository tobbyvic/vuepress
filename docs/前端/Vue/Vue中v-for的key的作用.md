## Vue中的diff

vue和react的虚拟DOM的Diff算法大致相同，其核心是基于两个简单的假设，首先讲一下diff算法的处理方法，对操作前后的dom树同一层的节点进行对比，一层一层对比，如下图：

![[Pasted image 20221020141746.png]]

当某一层有很多相同的节点时，也就是列表节点时，Diff算法的更新过程默认情况下也是遵循以上原则。比如一下这个情况：

![[Pasted image 20221020141832.png]]

我们希望可以在B和C之间加一个F，Diff算法默认执行起来是这样的：

![[Pasted image 20221020141858.png]]

即把C更新成F，D更新成C，E更新成D，最后再插入E，是不是很没有效率？

所以我们需要使用key来给每个节点做一个唯一标识，Diff算法就可以正确的识别此节点，找到正确的位置区插入新的节点。

![[Pasted image 20221020141922.png]]

Vue中列表循环需加:key="唯一标识" 唯一标识可以是item里面id等，因为vue组件高度复用增加Key可以标识组件的唯一性，为了更好地区别各个组件 key的作用主要是为了高效的更新虚拟DOM。

